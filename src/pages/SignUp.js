import React, {useEffect, useState} from 'react';
import '../css/SignUp.css';
import {postCall} from '../utils/authWrapper'

import {Link} from 'react-router-dom';

const SignUp = () => {

    const [id, setId] = useState("");
    const [nick, setNick] = useState("");
    const [pw, setPw] = useState("");
    const [repw, setRepw] = useState("");
    const [email, setEmail] = useState("");
    const [chkpw, SetChkpw] = useState("");
    // const [term, setTerm] = useState(false);

    const onChangeId = e => {
        setId(e.target.value);
    };

    const onChangeNick = e => {
        setNick(e.target.value);
    };

    const onChangePw = e => {
        setPw(e.target.value);
    };

    const onChangeRepw = e => {
        setRepw(e.target.value);
    };

    const onChangeEmail = e => {
        setEmail(e.target.value);
    }

    // const onChangeTerm = e => {
    //     setTerm(e.target.value);
    // };

    // ÎπÑÎèôÍ∏∞->(value Îã§ Î∞îÍæ∏Î©¥ „Ñ±„Ñ±)
    // useEffect(() => {

    // }, [signupValue])

    const onSubmit = () => {
        postCall('https://mexus-api.herokuapp.com/auth/signup', {
            id: id,
            password: pw,
            nickName: nick,
            email: email
        }).then((data) => console.log(data))
            .catch(error => {
                console.log('error on component : ', error.response.data)
            })
        /*
                    .then((data)=>console.log(data))
        */
        /*        Axios.post('https://mexus-api.herokuapp.com/auth/signup',
                    {
                        id: id,
                        password: pw,
                        nickName: nick,
                        email: email
                    })
                    .then(function (response) {
                        console.log(response.data);
                    })
                    .catch(error => { console.log('error : ', error.response.data) });*/
    }

    useEffect(() => {
        if (pw.length < 1 || repw.length < 1) {
            SetChkpw('üìùÌå®Ïä§ÏõåÎìú ÏûÖÎ†•üìù')
            // ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä Í∞ôÎã§Î©¥ ÏùºÏπò
        } else if (pw === repw) {
            SetChkpw('‚úÖÏùºÏπò ‚úÖ')
            // ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä Í∞ôÏßÄ ÏïäÎã§Î©¥ Î∂àÏùºÏπò
        } else {
            SetChkpw('‚ùåÎ∂àÏùºÏπò ‚ùå')
        }
    }, [pw, repw])

    return (
        <div>
            <div style={{textAlign: "center"}}>
                <Link to='/'>
                    <button className='MainButton'>
                    </button>
                </Link>
            </div>
            <div style={{textAlign: "center"}}>
                <input className='TextInput' placeholder='ÎãâÎÑ§ÏûÑ' value={nick} onChange={onChangeNick}/>
            </div>
            <div style={{textAlign: "center"}}>
                <input className='IDInput' placeholder='ÏïÑÏù¥Îîî' value={id} onChange={onChangeId}/>
                <button className='DuplicateButton'>
                    IDÌôïÏù∏
                </button>
            </div>
            <div style={{textAlign: "center"}}>
                <input className='TextInput' placeholder='ÎπÑÎ∞ÄÎ≤àÌò∏' value={pw} onChange={onChangePw} type="password"/>
                <i class="fa fa-eye fa-lg"></i>
            </div>
            <div style={{textAlign: "center"}}>
                <input className='TextInput' placeholder='ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏' value={repw} onChange={onChangeRepw}
                       type="password"/>
                <div>
                    {chkpw}
                </div>
            </div>
            <div style={{textAlign: "center"}}>
                <input className='TextInput' placeholder='Ïù¥Î©îÏùº' type='email' value={email} onChange={onChangeEmail}/>
            </div>
            <div style={{textAlign: "center"}}>
                <button className='SignInAndLogInButton' onClick={onSubmit}>
                    ÌöåÏõêÍ∞ÄÏûÖ ÌõÑ Î°úÍ∑∏Ïù∏
                </button>
            </div>
        </div>
    );
}

export default SignUp;

// //Ïù¥Î©îÏùº Ïù∏ÌíãÏ∞Ω Ìï∏Îì§ÎßÅ
// const handleEmail = e => {
//     e.preventDefault();
//     this.setState({
//         email: e.target.value
//     });
// };

// //Ïù¥Î©îÏùº Ï§ëÎ≥µÍ≤ÄÏÇ¨
// const checkEmail = e => {
//     e.preventDefault();

//     //Ïù¥Î©îÏùº Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨ Ìï®Ïàò
//     const chkEmail = function (str) {
//         var regExp = /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i;
//         return regExp.test(str) ? true : false;
//     };

//     const inputEmail = {
//         email: this.state.email
//     };

//     const email_info = {
//         method: "POST",
//         body: JSON.stringify(inputEmail),
//         headers: {
//             "Content-Type": "application/json"
//         }
//     };

//     if (chkEmail(this.state.email) === false) {
//         alert("Ïù¥Î©îÏùº ÌòïÏãùÏù¥ Ïú†Ìö®ÌïòÏßÄ ÏïäÏäµÎãàÎã§.");
//         this.setState({
//             email: ""
//         });
//     } else {
//         Axios
//             .post("https://mexus-api.herokuapp.com/auth/signup", email_info)
//             .then(res => res.json())
//             .then(json => {
//                 if (json === true) {
//                     alert("ÏÇ¨Ïö©Í∞ÄÎä• Ìïú ÏïÑÏù¥ÎîîÏûÖÎãàÎã§");
//                     this.setState({
//                         emailCheck: this.state.email
//                     });
//                 } else {
//                     alert("Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî ÏïÑÏù¥ÎîîÏûÖÎãàÎã§");
//                 }
//             });
//     }
// };

// //ÎãâÎÑ§ÏûÑ Ïù∏ÌíãÏ∞Ω Ìï∏Îì§ÎßÅ
// const handleNickname = e => {
//     e.preventDefault();
//     this.setState({
//         nickname: e.target.value
//     });
// };

// //ÎãâÎÑ§ÏûÑ Ï§ëÎ≥µÍ≤ÄÏÇ¨
// const checkNickname = e => {
//     e.preventDefault();

//     const chkNickname = function (str) {
//         var regNm = /^[Í∞Ä-Ìû£]{2,15}|[a-zA-Z]{2,15}\s[a-zA-Z]{2,15}$/;
//         return regNm.test(str) ? true : false;
//     };

//     const inputNickname = {
//         nickname: this.state.nickname
//     };

//     const nickname_info = {
//         method: "POST",
//         body: JSON.stringify(inputNickname),
//         headers: {
//             "Content-Type": "application/json"
//         }
//     };
//     if (chkNickname(this.state.nickname) === false) {
//         alert("ÌïúÍ∏Ä,ÏòÅÎ¨∏ ÎåÄÏÜåÎ¨∏Ïûê 2~15ÏûêÎ¶¨Îßå ÏÇ¨Ïö© Í∞ÄÎä•Ìï©ÎãàÎã§");
//     } else {
//         fetch("http://localhost:9089/user/nick", nickname_info)
//             .then(res => res.json())
//             .then(json => {
//                 if (json === true) {
//                     alert("ÏÇ¨Ïö© Í∞ÄÎä•Ìïú ÎãâÎÑ§ÏûÑÏûÖÎãàÎã§.");
//                     this.setState({
//                         nicknameCheck: this.state.nickname
//                     });
//                 } else {
//                     alert("Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî ÎãâÎÑ§ÏûÑÏûÖÎãàÎã§.");
//                 }
//             });
//     }
// };

// // ÏïÑÏù¥Îîî Ï§ëÎ≥µÍ≤ÄÏÇ¨
// const checkID = e => {
//     e.preventDefault();

//     const chkID = function (str) {
//         var regNm = /^[Í∞Ä-Ìû£]{2,15}|[a-zA-Z]{2,15}\s[a-zA-Z]{2,15}$/;
//         return regNm.test(str) ? true : false;
//     };

//     const inputID = {
//         id: this.state.id
//     };

//     const ID_info = {
//         method: "POST",
//         body: JSON.stringify(inputID),
//         headers: {
//             "Content-Type": "application/json"
//         }
//     };
//     if (chkID(this.state.id) === false) {
//         alert("ÌïúÍ∏Ä,ÏòÅÎ¨∏ ÎåÄÏÜåÎ¨∏Ïûê 2~15ÏûêÎ¶¨Îßå ÏÇ¨Ïö© Í∞ÄÎä•Ìï©ÎãàÎã§");
//     } else {
//         Axios
//             .post("https://mexus-api.herokuapp.com/auth/signup", ID_info)
//             .then(res => res.json())
//             .then(json => {
//                 if (json === true) {
//                     alert("ÏÇ¨Ïö© Í∞ÄÎä•Ìïú ÏïÑÏù¥ÎîîÏûÖÎãàÎã§.");
//                     this.setState({
//                         idCheck: this.state.id
//                     });
//                 } else {
//                     alert("Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî ÏïÑÏù¥ÎîîÏûÖÎãàÎã§.");
//                 }
//             });
//     }
// };

// //Ï≤´Î≤àÏß∏ Ìå®Ïä§ÏõåÎìú ÏûÖÎ†•Ï∞Ω setÎ≥ÄÌôò
// const handlePW = e => {
//     e.preventDefault();
//     this.setState({
//         pw: e.target.value
//     });
// };
// //ÎëêÎ≤àÏß∏ Ìå®Ïä§ÏõåÎìú ÏûÖÎ†•Ï∞Ω setÎ≥ÄÌôò
// const handleRE_PW = e => {
//     e.preventDefault();
//     this.setState({
//         re_pw: e.target.value
//     });
// };
// //Ï≤´Î≤à Ïß∏ ÎëêÎ≤à Ïß∏ Ìå®Ïä§ÏõåÎìú ÏùºÏπò ÌôïÏù∏
// const checkPW = e => {
//     e.preventDefault();

//     //ÎπÑÎ∞ÄÎ≤àÌò∏ Ïú†Ìö®ÏÑ±Í≤ÄÏÇ¨(ÏòÅÎ¨∏,Ïà´Ïûê ÌòºÌï© 6~20)
//     const chkPwd = function (str) {
//         var reg_pwd = /^.*(?=.{6,20})(?=.*[0-9])(?=.*[a-zA-Z]).*$/;
//         return !reg_pwd.test(str) ? false : true;
//     };

//     if (chkPwd(this.state.re_pw) === false) {
//         alert("ÏòÅÎ¨∏,Ïà´ÏûêÎ•º ÌòºÌï©ÌïòÏó¨ 6~12Ïûê Ïù¥ÎÇ¥");
//         this.setState({
//             pw: "",
//             re_pw: ""
//         });
//     } else {
//         if (this.state.pw === this.state.re_pw) {
//             alert("ÏùºÏπòÌï©ÎãàÎã§.");
//             this.setState({
//                 pwCheck: this.state.re_pw
//             });
//         } else {
//             alert("Î∂àÏùºÏπòÌï©ÎãàÎã§.");
//         }
//     }
// };

// //ÏÑúÎ≤ÑÎ°ú Í∞ÄÏûÖ ÏñëÏãù Ï†úÏ∂ú
// const handleSubmit = e => {
//     e.preventDefault();
//     const {
//         id,
//         password,
//         Repassword,
//         nickName,
//         email
//     } = this.state;

//     const signupInfo = {
//         email: this.state.emailCheck,
//         pw: this.state.pwCheck,
//         nickname: this.state.nicknameCheck
//     };

//     const signup_info = {
//         method: "POST",
//         body: JSON.stringify(signupInfo),
//         headers: {
//             "Content-Type": "application/json"
//         }
//     };

//     if (
//         this.email &&
//         this.nickname &&
//         this.pw &&
//         this.re_pw &&
//         this.email === this.emailCheck &&
//         this.nickname === this.nicknameCheck &&
//         this.pw === this.re_pw &&
//         this.re_pw === this.pwCheck
//     ) {

//     } else {
//         alert("ÏûÖÎ†•Í∞íÏùÑ ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî");
//     }
// };